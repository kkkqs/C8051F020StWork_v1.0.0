# C8051F020 电梯系统硬件使用说明书

## 1. 键盘操作指南 (Keypad Operation)

本系统采用 4x4 矩阵键盘进行交互，按键功能布局如下：

| 按键 (Key) | 键值 (Hex) | 梯内模式 (Inside Mode) | 梯外模式 (Outside Mode) | 配置/密码模式 (Config/Pass) |
| :--- | :--- | :--- | :--- | :--- |
| **0 - 9** | 0x00 - 0x09 | 选择目标楼层 (-2F 到 8F) | 先选楼层，后选方向 | 输入数字/选项 |
| **A** | 0x0A | **切换输入模式** (内/外) | **切换输入模式** (内/外) | **确认 (Confirm/Enter)** |
| **B** | 0x0B | (无定义) | (无定义) | **退格/删除 (Backspace)** |
| **C** | 0x0C | **开门 (Open)** | (无定义) | (无定义) |
| **D** | 0x0D | **关门 (Close)** | (无定义) | (无定义) |
| **E** | 0x0E | (无定义) | **上行呼叫 (Up Call)** | (无定义) |
| **F** | 0x0F | (无定义) | **下行呼叫 (Down Call)** | (无定义) |

### 1.1 楼层与数字对应表
由于只有 0-9 数字键，楼层映射如下：
*   **0**: -2 楼 (B2)
*   **1**: -1 楼 (B1)
*   **2**: 1 楼 (L1)
*   **...**
*   **9**: 8 楼 (L8)

---

## 2. 显示界面说明 (Display Interface)

### 2.1 LCD1602 液晶显示屏
LCD 主要显示当前系统状态和文字提示。

*   **待机状态**: 显示 `Welcome`。
*   **运行状态**: 显示 `Running...`。
*   **开关门**: 显示 `open door` 或 `close door`。
*   **模式提示**:
    *   `Inside`: 当前处于梯内选层模式。
    *   `Out: 2`: 当前处于梯外模式，已预选 2 楼，等待选择方向。

### 2.2 LED 数码管 (6位)
数码管用于显示动态动画和具体参数。
*   **格式**: `[方向/门状态] [空格] [当前楼层] [空格] [目标楼层]`
*   **符号含义**:
    *   `U`: 上行 (Up)
    *   `d`: 下行 (Down)
    *   `OP`: 开门 (Open) - 闪烁
    *   `CL`: 关门 (Close) - 闪烁
    *   `P.`: 密码输入掩码
    *   `E.`: 错误提示

---

## 3. 操作流程演示

### 3.1 正常乘梯 (Normal Operation)
系统默认处于 **梯内模式 (Inside Mode)**。
1.  **选择楼层**: 直接按下数字键 `0`-`9`。
    *   *例如：按 `5`，电梯前往 4 楼。*
2.  **开关门**:
    *   在待机或关门过程中，按 `C` 键可立即重开门。
    *   在开门过程中，按 `D` 键可提前关门。

### 3.2 梯外呼叫 (Outside Hall Call)
模拟在电梯厅按上下键。
1.  **切换模式**: 按下 `A` 键，LCD 显示变更为 `Out:`。
2.  **发起呼叫**:
    *   先按数字键选择你在哪一层。
    *   再按 `E` (上行) 或 `F` (下行)。
    *   *例如：你在 3 楼想上楼。按 `4` (代表3楼) -> 按 `E`。*
3.  **恢复**: 操作完成后，可再按 `A` 切回梯内模式。

### 3.3 修改密码 (Change Password)
1.  在配置菜单 (Option Menu) 下，按 `3` 进入修改密码选项。
2.  若在运行模式，需重启或通过特定组合键进入配置。
3.  输入 **5位新密码**。
4.  按 `A` 确认保存。LCD 显示 `New Pass` 提示成功。

---

## 4. 高级功能 (Advanced Features)

### 4.1 自动停泊 (Idle Parking)
*   当系统空闲无操作超过一定时间：
    *   若电梯在低层区，会自动返回 **1楼**。
    *   若电梯在高层区，会自动返回 **8楼**。

### 4.2 顺向截停 (Interception)
*   当电梯正在上行经过 3 楼前往 8 楼时，若此时有人在 3 楼按了“上行”按钮，电梯会自动减速并在 3 楼停靠开门，无需等待。

### 4.3 密码保护
*   系统启动或特定操作需要输入 5 位管理员密码。
*   默认密码通常为 `12345` (具体见代码配置)。
*   密码输入错误会显示 `Err` 并锁定数秒。
