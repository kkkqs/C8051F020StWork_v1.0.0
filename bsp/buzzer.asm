Buzzer_Segment SEGMENT CODE
RSEG Buzzer_Segment
$include (C8051F020.inc)

;-----------------------------------------------------------------------------
; External Dependencies
;-----------------------------------------------------------------------------
EXTRN CODE(Timer2_Init)
EXTRN CODE(Timer2_Start)
EXTRN CODE(Timer2_Stop)
EXTRN CODE(Timer2_Set_Reload)

;-----------------------------------------------------------------------------
; Global Definitions
;-----------------------------------------------------------------------------
PUBLIC Buzzer_Init
PUBLIC Buzzer_Start
PUBLIC Buzzer_Stop
PUBLIC Buzzer_Set_Frequency

;-----------------------------------------------------------------------------
; Code Segment
;-----------------------------------------------------------------------------

;-----------------------------------------------------------------------------
; Buzzer_Init
;-----------------------------------------------------------------------------
; Description: Initializes the buzzer hardware (Timer 2).
;-----------------------------------------------------------------------------
Buzzer_Init:
    LCALL Timer2_Init
    RET

;-----------------------------------------------------------------------------
; Buzzer_Start
;-----------------------------------------------------------------------------
; Description: Starts the buzzer PWM output.
;-----------------------------------------------------------------------------
Buzzer_Start:
    LCALL Timer2_Start
    RET

;-----------------------------------------------------------------------------
; Buzzer_Stop
;-----------------------------------------------------------------------------
; Description: Stops the buzzer PWM output.
;-----------------------------------------------------------------------------
Buzzer_Stop:
    LCALL Timer2_Stop
    RET

;-----------------------------------------------------------------------------
; Buzzer_Set_Frequency
;-----------------------------------------------------------------------------
; Description: Sets the buzzer frequency (via Timer Reload value).
; Input: R6 (RCAP2H), R7 (RCAP2L)
;-----------------------------------------------------------------------------
Buzzer_Set_Frequency:
    LCALL Timer2_Set_Reload
    RET

END
