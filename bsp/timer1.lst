A51 MACRO ASSEMBLER  TIMER1                                                               12/18/2025 19:23:45 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\..\..\..\Git\C8051F020StWork\bsp\timer1.obj
ASSEMBLER INVOKED BY: D:\1\Keil\C51\BIN\A51.EXE D:\Git\C8051F020StWork\bsp\timer1.asm SET(SMALL) DEBUG PRINT(.\Listings\
                      ..\..\..\Git\C8051F020StWork\bsp\timer1.lst) OBJECT(.\Objects\..\..\..\Git\C8051F020StWork\bsp\timer1.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ; bsp/timer1.asm - TIMER1 ISR moved from main
                       2     PUBLIC  TIMER1_ISR
                       3     ;$include (config.inc)
                +1     4     ; Shared configuration tables
                +1     5     ; placed at project root, included by ASM modules
                +1     6     CONFIG SEGMENT CODE
----            +1     7     rseg CONFIG
                +1     8             
                +1     9             
                +1    10             
                +1    11     ; ◊¥Ã¨≥£¡ø∂®“Â
  0000          +1    12     RUN_ST  EQU     00h
  0001          +1    13     OPT_ST  EQU     01h
  0002          +1    14     PASS_ST EQU     02h
  0011          +1    15     OPT1_ST EQU     11h
  0012          +1    16     OPT2_ST EQU     12h
  0013          +1    17     OPT3_ST EQU     13h
                +1    18             
                +1    19             
                +1    20             
                +1    21             
                +1    22             
0000            +1    23     SEG_TABLE:
0000 C0F9A4B0   +1    24             DB 0C0h,0F9h,0A4h,0B0h,099h,092h,082h,0F8h,080h,090h,088h,083h,0C6h,0A1h,086h,08Eh,
                             0F7h,00Ch,0AFH,047H
0004 999282F8                
0008 80908883                
000C C6A1868E                
0010 F70CAF47                
0014 40792430   +1    25             DB 040h,079h,024h,030h,019h,012h,002h,078h,000h,010h
0018 19120278                
001C 0010                    
001E ABA323FF   +1    26             DB 0ABH,0A3H,023H,0FFH,046h
0022 46                      
                +1    27     
0023            +1    28     BITMASK_TABLE:
0023 20100804   +1    29             DB 020h,010h,008h,004h,002h,001h
0027 0201                    
                +1    30     
0029            +1    31     PASSWORD_TABLE:
0029 01020304   +1    32             DB 01h,02h,03h,04h,05h
002D 05                      
                +1    33     
                +1    34     
                +1    35     
                      36     
                      37     
                      38     ; include ÂàáÊç¢Âà∞‰∫Ü CONFIG ÊÆµÔºåÁ°Æ‰øùÂêéÁª≠ ISR ËøîÂõûÂà∞ TMR1 ÊÆµ
                      39     TMR1    SEGMENT CODE
----                  40     rseg    TMR1
                      41     
0000                  42     TIMER1_ISR:
0000 C0D0             43             PUSH PSW
0002 C0E0             44             PUSH ACC
0004 C0F0             45             PUSH B
0006 C082             46             PUSH DPL
0008 C083             47             PUSH DPH
A51 MACRO ASSEMBLER  TIMER1                                                               12/18/2025 19:23:45 PAGE     2

000A C000             48             PUSH 00h
000C C001             49             PUSH 01h
                      50     
000E 758DFC           51             MOV TH1, #0FCh
0011 758B18           52             MOV TL1, #018h
                      53     
0014 7580FF           54             MOV P0, #0FFh
0017 75A000           55             MOV P2, #00h
                      56     
                      57             ; 0..5 Âæ™ÁéØ
001A E538             58             MOV A, 038h
001C FA               59             MOV R2, A         ; R2 = index
001D 2430             60             ADD A, #030h
001F F8               61             MOV R0, A
0020 E6               62             MOV A, @R0        ; ËØª Buffer
0021 F5F0             63             MOV B, A
                      64     
0023 900000   F       65             MOV DPTR, #SEG_TABLE
0026 E5F0             66             MOV A, B
0028 93               67             MOVC A, @A+DPTR   
0029 F5F0             68             MOV B, A          
                      69     
002B 900000   F       70             MOV DPTR, #BITMASK_TABLE
002E EA               71             MOV A, R2         
002F 93               72             MOVC A, @A+DPTR
0030 F9               73             MOV R1, A
                      74     
0031 E5F0             75             MOV A, B
0033 F580             76             MOV P0, A
0035 E9               77             MOV A, R1
0036 F5A0             78             MOV P2, A
                      79     
0038 0538             80             INC 038h
003A E538             81             MOV A, 038h
003C B40603           82             CJNE A, #06, ISR_EXIT ; 6 ‰ΩçÊï∞Á†ÅÁÆ°
003F 753800           83             MOV 038h, #00h
                      84     
0042                  85     ISR_EXIT:
0042 D001             86             POP 01h
0044 D000             87             POP 00h
0046 D083             88             POP DPH
0048 D082             89             POP DPL
004A D0F0             90             POP B
004C D0E0             91             POP ACC
004E D0D0             92             POP PSW
0050 32               93             RETI
                      94     
                      95     END
A51 MACRO ASSEMBLER  TIMER1                                                               12/18/2025 19:23:45 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
BITMASK_TABLE. . .  C ADDR   0023H   R   SEG=CONFIG
CONFIG . . . . . .  C SEG    002EH       REL=UNIT
DPH. . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . .  D ADDR   0082H   A   
ISR_EXIT . . . . .  C ADDR   0042H   R   SEG=TMR1
OPT1_ST. . . . . .  N NUMB   0011H   A   
OPT2_ST. . . . . .  N NUMB   0012H   A   
OPT3_ST. . . . . .  N NUMB   0013H   A   
OPT_ST . . . . . .  N NUMB   0001H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
PASSWORD_TABLE . .  C ADDR   0029H   R   SEG=CONFIG
PASS_ST. . . . . .  N NUMB   0002H   A   
PSW. . . . . . . .  D ADDR   00D0H   A   
RUN_ST . . . . . .  N NUMB   0000H   A   
SEG_TABLE. . . . .  C ADDR   0000H   R   SEG=CONFIG
TH1. . . . . . . .  D ADDR   008DH   A   
TIMER1_ISR . . . .  C ADDR   0000H   R   SEG=TMR1
TL1. . . . . . . .  D ADDR   008BH   A   
TMR1 . . . . . . .  C SEG    0051H       REL=UNIT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
