A51 MACRO ASSEMBLER  TIMER0                                                               12/18/2025 18:15:41 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\..\..\..\Git\C8051F020StWork\bsp\timer0.obj
ASSEMBLER INVOKED BY: D:\1\Keil\C51\BIN\A51.EXE D:\Git\C8051F020StWork\bsp\timer0.asm SET(SMALL) DEBUG PRINT(.\Listings\
                      ..\..\..\Git\C8051F020StWork\bsp\timer0.lst) OBJECT(.\Objects\..\..\..\Git\C8051F020StWork\bsp\timer0.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ; bsp/timer0.asm - TIMER0 ISR moved from main
                       2     PUBLIC  TIMER0_ISR
                       3     TMR0    SEGMENT CODE
----                   4     rseg    TMR0
                       5     
0000                   6     TIMER0_ISR:
0000 C0D0              7             PUSH PSW
0002 C0E0              8             PUSH ACC
0004 C0F0              9             PUSH B
                      10     
0006 758CD8           11             MOV TH0, #0D8h
0009 758AF0           12             MOV TL0, #0F0h
                      13     
000C E546             14             MOV A, 046h
000E B4FF02           15             CJNE A, #0FFh, T0_KEY_HELD
0011 802A             16             SJMP T0_EXIT
                      17     
0013                  18     T0_KEY_HELD:
0013 E547             19             MOV A, 047h
0015 B4FF02           20             CJNE A, #0FFh, T0_INC
0018 8023             21             SJMP T0_EXIT
001A                  22     T0_INC:
001A 0547             23             INC 047h
001C E547             24             MOV A, 047h
001E C3               25             CLR C
001F 9464             26             SUBB A, #064h
0021 5002             27             JNC T0_LONG_REACHED
0023 8018             28             SJMP T0_EXIT
                      29     
0025                  30     T0_LONG_REACHED:
0025 E548             31             MOV A, 048h
0027 B40013           32             CJNE A, #00h, T0_EXIT
002A E560             33             MOV A, 060h
002C 540F             34             ANL A, #0Fh
002E 4480             35             ORL A, #080h
0030 F560             36             MOV 060h, A
0032 756101           37             MOV 061h, #01h
0035 754802           38             MOV 048h, #02h
0038 754764           39             MOV 047h, #064h
003B 8000             40             SJMP T0_EXIT
                      41     
003D                  42     T0_EXIT:
003D D0F0             43             POP B
003F D0E0             44             POP ACC
0041 D0D0             45             POP PSW
0043 32               46             RETI
                      47     
                      48     END
A51 MACRO ASSEMBLER  TIMER0                                                               12/18/2025 18:15:41 PAGE     2

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
PSW. . . . . . . .  D ADDR   00D0H   A   
T0_EXIT. . . . . .  C ADDR   003DH   R   SEG=TMR0
T0_INC . . . . . .  C ADDR   001AH   R   SEG=TMR0
T0_KEY_HELD. . . .  C ADDR   0013H   R   SEG=TMR0
T0_LONG_REACHED. .  C ADDR   0025H   R   SEG=TMR0
TH0. . . . . . . .  D ADDR   008CH   A   
TIMER0_ISR . . . .  C ADDR   0000H   R   SEG=TMR0
TL0. . . . . . . .  D ADDR   008AH   A   
TMR0 . . . . . . .  C SEG    0044H       REL=UNIT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
