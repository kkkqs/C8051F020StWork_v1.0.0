A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\..\..\..\Git\C8051F020StWork\user\main.obj
ASSEMBLER INVOKED BY: D:\1\Keil\C51\BIN\A51.EXE D:\Git\C8051F020StWork\user\main.asm SET(SMALL) DEBUG PRINT(.\Listings\.
                      .\..\..\Git\C8051F020StWork\user\main.lst) OBJECT(.\Objects\..\..\..\Git\C8051F020StWork\user\main.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ;$include (config.inc)
                +1     2     ; Á¥¢Âºï‰ªé 0 ÂºÄÂßãÔºå‰æõ main.ASM ‰∏≠ÈÄöËøáÂÅèÁßªËÆøÈóÆ (MOVC @A+DPTR)
                +1     3     ; 00 - '0'  - 0C0h
                +1     4     ; 01 - '1'  - 0F9h
                +1     5     ; 02 - '2'  - 0A4h
                +1     6     ; 03 - '3'  - 0B0h
                +1     7     ; 04 - '4'  - 099h
                +1     8     ; 05 - '5'  - 092h
                +1     9     ; 06 - '6'  - 082h
                +1    10     ; 07 - '7'  - 0F8h
                +1    11     ; 08 - '8'  - 080h
                +1    12     ; 09 - '9'  - 090h
                +1    13     ; 10 - 'A'  - 088h
                +1    14     ; 11 - 'b'  - 083h
                +1    15     ; 12 - 'C'  - 0C6h
                +1    16     ; 13 - 'd'  - 0A1h
                +1    17     ; 14 - 'E'  - 086h
                +1    18     ; 15 - 'F'  - 08Eh
                +1    19     ; 16 - '_'  - 0F7h
                +1    20     ; 17 - 'P.' - 00Ch
                +1    21     ; 18 - 'r'  - 0AFh
                +1    22     ; 19 - 'L'  - 047h
                +1    23     ; 20 - '0.' - 040h
                +1    24     ; 21 - '1.' - 079h
                +1    25     ; 22 - '2.' - 024h
                +1    26     ; 23 - '3.' - 030h
                +1    27     ; 24 - '4.' - 019h
                +1    28     ; 25 - '5.' - 012h
                +1    29     ; 26 - '6.' - 002h
                +1    30     ; 27 - '7.' - 078h
                +1    31     ; 28 - '8.' - 000h
                +1    32     ; 29 - '9.' - 010h
                +1    33     ; 30 - 'n'  - 0ABh
                +1    34     ; 31 - 'o'  - 0A3h
                +1    35     ; 32 - 'o.' - 023h
                +1    36     ; 33 - OFF  - 0FFh    ; ÁÜÑÁÅ≠ (ÂÖ®ÈÉ®ÊÆµÂÖ≥Èó≠)
                +1    37     ; 34 - 'C.' - 046h    ; Ëá™ÂÆö‰πâ C Â∏¶Â∞èÊï∞ÁÇπ
                +1    38     
0000            +1    39     SEG_TABLE:
0000 C0F9A4B0   +1    40         DB 0C0h,0F9h,0A4h,0B0h,099h,092h,082h,0F8h,080h,090h,088h,083h,0C6h,0A1h,086h,08Eh,0F7h
                             ,00Ch,0AFh,047h
0004 999282F8                
0008 80908883                
000C C6A1868E                
0010 F70CAF47                
0014 40792430   +1    41         DB 040h,079h,024h,030h,019h,012h,002h,078h,000h,010h
0018 19120278                
001C 0010                    
001E ABA323FF   +1    42         DB 0ABh,0A3h,023h,0FFh,046h
0022 46                      
                +1    43     
0023            +1    44     BITMASK_TABLE:
0023 20100804   +1    45         DB 020h,010h,008h,004h,002h,001h
0027 0201                    
                +1    46     
0029            +1    47     PASSWORD_TABLE:
0029 01020304   +1    48         DB 01h,02h,03h,04h,05h
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE     2

002D 05                      
                +1    49     
                +1    50     ; RUN_ST, OPT_ST, PASS_ST, OPT1_ST, OPT2_ST, OPT3_ST
  0000          +1    51     RUN_ST  EQU     00h
  0001          +1    52     OPT_ST  EQU     01h
  0002          +1    53     PASS_ST EQU     02h
  0011          +1    54     OPT1_ST EQU     11h
  0012          +1    55     OPT2_ST EQU     12h
  0013          +1    56     OPT3_ST EQU     13h
                      57     
                      58     
                      59     EXTRN CODE(MatrixKey)
                      60     EXTRN CODE(Timer1_Init)
                      61     EXTRN CODE(Timer0_Init)
                      62     EXTRN CODE(TIMER0_ISR)
                      63     EXTRN CODE(TIMER1_ISR)
                      64     EXTRN CODE(LED6_ApplyTable)
                      65             
                      66             
0000                  67     ORG 0000h
0000 020700           68             LJMP MAIN
                      69     
000B                  70     ORG 000Bh
000B 020000   F       71             LJMP TIMER0_ISR
                      72     
001B                  73     ORG 001Bh
001B 020000   F       74             LJMP TIMER1_ISR
                      75     
0700                  76             ORG 0700h
0700                  77     MAIN:
0700 7580FF           78             MOV P0, #0FFh
0703 75A000           79             MOV P2, #00h
                      80             
                      81             ; ÂàùÂßãÂåñÊòæÁ§∫ÁºìÂÜ≤ (6‰Ωç) => ‰ΩøÁî® LED6 Ë°® 00 (DISPLAY_INIT_BLANK)
0706 7400             82             MOV A, #00h
0708 120000   F       83             LCALL LED6_ApplyTable
                      84             
070B 753800           85             MOV 038h, #00h
                      86     
070E 757000           87             MOV 070h, #00h
0711 757100           88             MOV 071h, #00h
                      89     
0714 7544FF           90             MOV 044h, #0FFh
0717 754500           91             MOV 045h, #00h
071A 7546FF           92             MOV 046h, #0FFh
071D 754700           93             MOV 047h, #00h
0720 754800           94             MOV 048h, #00h
0723 753A03           95             MOV 03Ah, #03h
                      96     
0726 120000   F       97             LCALL Timer1_Init
0729 120000   F       98             LCALL Timer0_Init
                      99     
072C                 100     LOOP:
                     101             EXTRN CODE(KeyInput_Process)
072C 120000   F      102             LCALL KeyInput_Process
                     103     
072F                 104     MXK_STATE_CHECK:
072F E570            105             MOV A, 070h
0731 B40005          106             CJNE A,#RUN_ST, CHECK_OPT
0734 120763          107             LCALL RUN_HANDLER
0737 80F3            108             SJMP LOOP
0739                 109     CHECK_OPT:
0739 B40105          110             CJNE A,#OPT_ST, CHECK_OPT1
073C 120790          111             LCALL OPT_HANDLER
073F E12C            112             AJMP LOOP
0741                 113     CHECK_OPT1:
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE     3

0741 B41105          114             CJNE A,#OPT1_ST, CHECK_OPT2
0744 12080C          115             LCALL OPT1_HANDLER
0747 E12C            116             AJMP LOOP
0749                 117     CHECK_OPT2:
0749 B41205          118             CJNE A,#OPT2_ST, CHECK_OPT3
074C 120883          119             LCALL OPT2_HANDLER
074F E12C            120             AJMP LOOP
0751                 121     CHECK_OPT3:
0751 B41305          122             CJNE A,#OPT3_ST, CHECK_PASS
0754 1208FA          123             LCALL OPT3_HANDLER
0757 E12C            124             AJMP LOOP
0759                 125     CHECK_PASS:
0759 B40205          126             CJNE A,#PASS_ST, SKIP_PASS
075C 120970          127             LCALL PASS_HANDLER
075F E12C            128             AJMP LOOP
0761                 129     SKIP_PASS:
0761 E12C            130             AJMP LOOP
                     131     
                     132     
                     133     ;-----------------------------
                     134     ; Áä∂ÊÄÅÊú∫
                     135     ;-----------------------------
                     136     
0763                 137     RUN_HANDLER:
0763 E571            138                     MOV A, 071h
0765 B57019          139                     CJNE A, 070h, RUN_INIT    
                     140     
0768 E561            141                     MOV A, 061h
076A B40002          142                     CJNE A, #00h, RUN_HANDLE_KEY
076D 8018            143                     SJMP RUN_MODE
                     144     
076F                 145     RUN_HANDLE_KEY:
076F E560            146                     MOV A, 060h
0771 B48A08          147                     CJNE A, #08Ah, RUN_HANDLE_OTHER
0774 757002          148                     MOV 070h, #PASS_ST
0777 756100          149                     MOV 061h, #00h
077A 800B            150                     SJMP RUN_MODE
                     151     
077C                 152     RUN_HANDLE_OTHER:
077C 756100          153                     MOV 061h, #00h
077F 8006            154                     SJMP RUN_MODE
                     155     
0781                 156     RUN_INIT:
0781 E570            157                     MOV A, 070h
0783 F571            158                     MOV 071h, A
0785 8000            159                     SJMP RUN_MODE
                     160     
0787                 161     RUN_MODE:
                     162             ; RUN Ê®°ÂºèÊòæÁ§∫Á©∫ÁôΩ (TABLE_DISPLAY_RUN_BLANK id=01)
0787 7401            163             MOV A, #01h
0789 120000   F      164             LCALL LED6_ApplyTable
078C 753904          165                     MOV 039h, #04h ; ÂØÜÁ†ÅÂÖâÊ†áÂàùÂßãÂåñ‰ΩçÁΩÆ (for later use)
078F 22              166                     RET
                     167     
0790                 168     OPT_HANDLER:
0790 E571            169             MOV A, 071h
0792 B57007          170             CJNE A, 070h, OPT_INIT
0795 E561            171             MOV A, 061h
0797 B4000E          172             CJNE A, #00h, OPT_HANDLE_KEY
079A E1A2            173             AJMP OPT_MODE
                     174     
079C                 175     OPT_INIT:
079C E570            176             MOV A, 070h
079E F571            177             MOV 071h, A
07A0 8000            178             SJMP OPT_MODE
                     179     
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE     4

07A2                 180     OPT_MODE:
                     181             ; ÊòæÁ§∫ËèúÂçï (6‰Ωç): 1.n 2.r 3.C
                     182             ; 35: 1. (0x15)
                     183             ; 34: n  (0x1E)
                     184             ; 33: 2. (0x16)
                     185             ; 32: r  (0x12)
                     186             ; 31: 3. (0x17)
                     187             ; 30: C  (0x0C)
                     188                     ; ‰∏ªËèúÂçïÊòæÁ§∫ (TABLE_MENU_MAIN_OPT id=02)
07A2 7402            189                     MOV A, #02h
07A4 120000   F      190                     LCALL LED6_ApplyTable
07A7 22              191             RET
                     192     
07A8                 193     OPT_HANDLE_KEY:
07A8 E560            194                     MOV A, 060h
07AA 540F            195                     ANL A, #0Fh
07AC B40A04          196                     CJNE A, #0Ah, OPT_CHECK_KEY1
07AF 1207E1          197                     LCALL OPT_CHECK_ALL_INPUTS
07B2 22              198                     RET
                     199     
07B3                 200     OPT_CHECK_KEY1:
07B3 E560            201                     MOV A, 060h
07B5 540F            202                     ANL A, #0Fh
07B7 B40107          203                     CJNE A, #01h, OPT_CHECK_KEY2
07BA 757011          204                     MOV 070h, #OPT1_ST
07BD 756100          205                     MOV 061h, #00h
07C0 22              206                     RET
                     207     
07C1                 208     OPT_CHECK_KEY2:
07C1 E560            209                     MOV A, 060h
07C3 540F            210                     ANL A, #0Fh
07C5 B40207          211                     CJNE A, #02h, OPT_CHECK_KEY3
07C8 757012          212                     MOV 070h, #OPT2_ST
07CB 756100          213                     MOV 061h, #00h
07CE 22              214                     RET
                     215     
07CF                 216     OPT_CHECK_KEY3:
07CF E560            217                     MOV A, 060h
07D1 540F            218                     ANL A, #0Fh
07D3 B40307          219                     CJNE A, #03h, OPT_HANDLE_KEY_SKIP
07D6 757013          220                     MOV 070h, #OPT3_ST
07D9 756100          221                     MOV 061h, #00h
07DC 22              222                     RET
                     223     
07DD                 224     OPT_HANDLE_KEY_SKIP:
07DD 756100          225                     MOV 061h, #00h
07E0 22              226                     RET
                     227     
07E1                 228     OPT_CHECK_ALL_INPUTS:
07E1 E550            229                     MOV A, 050h
07E3 600F            230                     JZ OPT_INPUT_INCOMPLETE
07E5 E552            231                     MOV A, 052h
07E7 600B            232                     JZ OPT_INPUT_INCOMPLETE
07E9 E554            233                     MOV A, 054h
07EB 6007            234                     JZ OPT_INPUT_INCOMPLETE
                     235                     
07ED 757000          236                     MOV 070h, #RUN_ST
07F0 756100          237                     MOV 061h, #00h
07F3 22              238                     RET
                     239     
07F4                 240     OPT_INPUT_INCOMPLETE:
                     241             ; ÊòæÁ§∫ Err011 (TABLE_OPT_ERR011 id=03)
07F4 7403            242             MOV A, #03h
07F6 120000   F      243             LCALL LED6_ApplyTable
                     244                     
07F9 7B04            245                     MOV R3, #04h
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE     5

07FB                 246     OPT_ERROR_DELAY_OUTER:
07FB 7CF0            247                     MOV R4, #0F0h
07FD                 248     OPT_ERROR_DELAY_LOOP:
07FD 7DFF            249                     MOV R5, #0FFh
07FF                 250     OPT_ERROR_DELAY_INNER:
07FF 00              251                     NOP
0800 00              252                     NOP
0801 00              253                     NOP
0802 DDFB            254                     DJNZ R5, OPT_ERROR_DELAY_INNER
0804 DCF7            255                     DJNZ R4, OPT_ERROR_DELAY_LOOP
0806 DBF3            256                     DJNZ R3, OPT_ERROR_DELAY_OUTER
                     257                     
0808 756100          258                     MOV 061h, #00h
080B 22              259                     RET
                     260     
                     261     
                     262     
080C                 263     OPT1_HANDLER:
080C E571            264                     MOV A, 071h
080E B57065          265                     CJNE A, 070h, OPT1_INIT
0811 E561            266                     MOV A, 061h
0813 B40003          267                     CJNE A, #00h, OPT1_INPUT_HANDLE_KEY
0816 8000            268                     SJMP OPT1_INPUT_MODE
                     269     
0818                 270     OPT1_INPUT_MODE:
0818 22              271                     RET
                     272     
0819                 273     OPT1_INPUT_HANDLE_KEY:
0819 E560            274                     MOV A, 060h
081B 540F            275                     ANL A, #0Fh
081D FF              276                     MOV R7, A
081E C3              277                     CLR C
081F 940A            278                     SUBB A, #0Ah
0821 5014            279                     JNC OPT1_INPUT_SPECIAL_KEY
                     280     
                     281                     ; Êï∞Â≠óÈîÆ
0823 E53B            282                     MOV A, 03Bh
0825 2430            283             ADD A, #030h
0827 F8              284             MOV R0, A
0828 EF              285                     MOV A, R7
0829 F6              286             MOV @R0, A
                     287     
                     288                     ; ÈôêÂà∂ËæìÂÖ•‰∏§‰Ωç (33->32)
082A E53B            289                     MOV A, 03Bh
082C B40202          290                     CJNE A, #02h, OPT1_INPUT_DEC ; ÊúÄ‰Ωé‰Ωç‰∏∫ 32, 0x02
082F 8002            291                     SJMP OPT1_INPUT_DONE
                     292     
0831                 293     OPT1_INPUT_DEC:
0831 153B            294             DEC 03Bh
                     295     
0833                 296     OPT1_INPUT_DONE:
0833 756100          297                     MOV 061h, #00h
0836 22              298                     RET
                     299     
0837                 300     OPT1_INPUT_SPECIAL_KEY:
0837 E560            301                     MOV A, 060h
0839 B40B22          302                     CJNE A, #0Bh, OPT1_INPUT_CHECK_CONFIRM
                     303                     ; BÈîÆÂõûÈÄÄ
                     304                     
083C E53B            305                     MOV A, 03Bh
083E 2430            306                     ADD A, #030h
0840 F8              307                     MOV R0, A
0841 7610            308                     MOV @R0, #010h
0843 053B            309                     INC 03Bh
                     310                     ; ÈôêÂà∂‰∏çË∂ÖËøá 3 (0x03)
0845 E53B            311                     MOV A, 03Bh
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE     6

0847 C3              312                     CLR C
0848 9404            313                     SUBB A, #04h
084A 5004            314                     JNC OPT1_INPUT_BACKSPACE_LIMIT
084C 756100          315                     MOV 061h, #00h
084F 22              316                     RET
                     317     
0850                 318     OPT1_INPUT_BACKSPACE_LIMIT:
0850 753B03          319                     MOV 03Bh, #03h
0853 E53B            320                     MOV A, 03Bh
0855 2430            321                     ADD A, #030h
0857 F8              322                     MOV R0, A
0858 7610            323                     MOV @R0, #010h
085A 756100          324                     MOV 061h, #00h
085D 22              325                     RET
                     326     
085E                 327     OPT1_INPUT_CHECK_CONFIRM:
085E E560            328                     MOV A, 060h
0860 B40A0F          329                     CJNE A, #0Ah, OPT1_INPUT_SKIP_CONFIRM
                     330                     ; Á°ÆËÆ§: ÂèñBuffer 33, 32
0863 E533            331                     MOV A, 033h
0865 F550            332                     MOV 050h, A
0867 E532            333                     MOV A, 032h
0869 F551            334                     MOV 051h, A
086B 756100          335                     MOV 061h, #00h
086E 757001          336                     MOV 070h, #OPT_ST
0871 22              337                     RET
                     338     
0872                 339     OPT1_INPUT_SKIP_CONFIRM:
0872 756100          340                     MOV 061h, #00h
0875 22              341                     RET
                     342     
0876                 343     OPT1_INIT:
0876 E570            344                     MOV A, 070h
0878 F571            345                     MOV 071h, A
                     346                     ; ÊòæÁ§∫ "no._d_d__" (ÈÄÇÂ∫î6‰Ωç)
                     347                     ; 35: n (0x1E)
                     348                     ; 34: o.(0x20)
                     349                     ; 33: _ (input 1)
                     350                     ; 32: _ (input 2)
                     351                     ; 31: _
                     352                     ; 30: _
                     353                     ; OPT1 ÊèêÁ§∫ (TABLE_OPT1_PROMPT id=04)
087A 7404            354                     MOV A, #04h
087C 120000   F      355                     LCALL LED6_ApplyTable
087F 753B03          356                     MOV 03Bh, #03h    ; ÂÖâÊ†á‰ªé 33h ÂºÄÂßã (Buffer Index 3)
0882 22              357                     RET
                     358     
                     359     
0883                 360     OPT2_HANDLER:
0883 E571            361                     MOV A, 071h
0885 B57065          362                     CJNE A, 070h, OPT2_INIT
0888 E561            363                     MOV A, 061h
088A B40003          364                     CJNE A, #00h, OPT2_INPUT_HANDLE_KEY
088D 8000            365                     SJMP OPT2_INPUT_MODE
                     366     
088F                 367     OPT2_INPUT_MODE:
088F 22              368                     RET
                     369     
0890                 370     OPT2_INPUT_HANDLE_KEY:
0890 E560            371                     MOV A, 060h
0892 540F            372                     ANL A, #0Fh
0894 FF              373                     MOV R7, A
0895 C3              374                     CLR C
0896 940A            375                     SUBB A, #0Ah
0898 5014            376                     JNC OPT2_INPUT_SPECIAL_KEY
                     377     
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE     7

089A E53B            378                     MOV A, 03Bh
089C 2430            379             ADD A, #030h
089E F8              380             MOV R0, A
089F EF              381                     MOV A, R7
08A0 F6              382             MOV @R0, A
                     383     
08A1 E53B            384                     MOV A, 03Bh
08A3 B40102          385                     CJNE A, #01h, OPT2_INPUT_DEC
08A6 8002            386                     SJMP OPT2_INPUT_DONE
                     387     
08A8                 388     OPT2_INPUT_DEC:
08A8 153B            389             DEC 03Bh
                     390     
08AA                 391     OPT2_INPUT_DONE:
08AA 756100          392                     MOV 061h, #00h
08AD 22              393                     RET
                     394     
08AE                 395     OPT2_INPUT_SPECIAL_KEY:
08AE E560            396                     MOV A, 060h
08B0 B40B22          397                     CJNE A, #0Bh, OPT2_INPUT_CHECK_CONFIRM
                     398                     
08B3 E53B            399                     MOV A, 03Bh
08B5 2430            400                     ADD A, #030h
08B7 F8              401                     MOV R0, A
08B8 7610            402                     MOV @R0, #010h
08BA 053B            403                     INC 03Bh
08BC E53B            404                     MOV A, 03Bh
08BE C3              405                     CLR C
08BF 9404            406                     SUBB A, #04h
08C1 5004            407                     JNC OPT2_INPUT_BACKSPACE_LIMIT
08C3 756100          408                     MOV 061h, #00h
08C6 22              409                     RET
                     410     
08C7                 411     OPT2_INPUT_BACKSPACE_LIMIT:
08C7 753B03          412                     MOV 03Bh, #03h
08CA E53B            413                     MOV A, 03Bh
08CC 2430            414                     ADD A, #030h
08CE F8              415                     MOV R0, A
08CF 7610            416                     MOV @R0, #010h
08D1 756100          417                     MOV 061h, #00h
08D4 22              418                     RET
                     419     
08D5                 420     OPT2_INPUT_CHECK_CONFIRM:
08D5 E560            421                     MOV A, 060h
08D7 B40A0F          422                     CJNE A, #0Ah, OPT2_INPUT_SKIP_CONFIRM
                     423                     
08DA E533            424                     MOV A, 033h
08DC F552            425                     MOV 052h, A
08DE E532            426                     MOV A, 032h
08E0 F553            427                     MOV 053h, A
08E2 756100          428                     MOV 061h, #00h
08E5 757001          429                     MOV 070h, #OPT_ST
08E8 22              430                     RET
                     431     
08E9                 432     OPT2_INPUT_SKIP_CONFIRM:
08E9 756100          433                     MOV 061h, #00h
08EC 22              434                     RET
                     435     
08ED                 436     OPT2_INIT:
08ED E570            437                     MOV A, 070h
08EF F571            438                     MOV 071h, A
                     439                     ; ÊòæÁ§∫ "rL_d_d__"
                     440                     ; 35: r (0x12)
                     441                     ; 34: L (0x13)
                     442                     ; 33: _
                     443                     ; 32: _
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE     8

                     444                     ; 31: _
                     445                     ; 30: _
                     446                     ; OPT2 ÊèêÁ§∫ (TABLE_OPT2_PROMPT id=05)
08F1 7405            447                     MOV A, #05h
08F3 120000   F      448                     LCALL LED6_ApplyTable
08F6 753B03          449                     MOV 03Bh, #03h    ; ÂÖâÊ†á‰ªé 33h ÂºÄÂßã
08F9 22              450                     RET
                     451     
                     452     
08FA                 453     OPT3_HANDLER:
08FA E571            454                     MOV A, 071h
08FC B57061          455                     CJNE A, 070h, OPT3_INIT
08FF E561            456                     MOV A, 061h
0901 B40003          457                     CJNE A, #00h, OPT3_INPUT_HANDLE_KEY
0904 8000            458                     SJMP OPT3_INPUT_MODE
                     459     
0906                 460     OPT3_INPUT_MODE:
0906 22              461                     RET
                     462     
0907                 463     OPT3_INPUT_HANDLE_KEY:
0907 E560            464                     MOV A, 060h
0909 540F            465                     ANL A, #0Fh
090B FF              466                     MOV R7, A
090C C3              467                     CLR C
090D 940A            468                     SUBB A, #0Ah
090F 5014            469                     JNC OPT3_INPUT_SPECIAL_KEY
                     470     
0911 E53B            471                     MOV A, 03Bh
0913 2430            472             ADD A, #030h
0915 F8              473             MOV R0, A
0916 EF              474                     MOV A, R7
0917 F6              475             MOV @R0, A
                     476     
0918 E53B            477                     MOV A, 03Bh
091A B40402          478                     CJNE A, #04h, OPT3_INPUT_DEC ; ÊúÄ‰Ωé‰Ωç 34 (0x04)
091D 8002            479                     SJMP OPT3_INPUT_DONE
                     480     
091F                 481     OPT3_INPUT_DEC:
091F 153B            482             DEC 03Bh
                     483     
0921                 484     OPT3_INPUT_DONE:
0921 756100          485                     MOV 061h, #00h
0924 22              486                     RET
                     487     
0925                 488     OPT3_INPUT_SPECIAL_KEY:
0925 E560            489                     MOV A, 060h
0927 B40B22          490                     CJNE A, #0Bh, OPT3_INPUT_CHECK_CONFIRM
                     491                     
092A E53B            492                     MOV A, 03Bh
092C 2430            493                     ADD A, #030h
092E F8              494                     MOV R0, A
092F 7610            495                     MOV @R0, #010h
0931 053B            496                     INC 03Bh
0933 E53B            497                     MOV A, 03Bh
0935 C3              498                     CLR C
0936 9405            499                     SUBB A, #05h
0938 5004            500                     JNC OPT3_INPUT_BACKSPACE_LIMIT
093A 756100          501                     MOV 061h, #00h
093D 22              502                     RET
                     503     
093E                 504     OPT3_INPUT_BACKSPACE_LIMIT:
093E 753B04          505                     MOV 03Bh, #04h
0941 E53B            506                     MOV A, 03Bh
0943 2430            507                     ADD A, #030h
0945 F8              508                     MOV R0, A
0946 7610            509                     MOV @R0, #010h
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE     9

0948 756100          510                     MOV 061h, #00h
094B 22              511                     RET
                     512     
094C                 513     OPT3_INPUT_CHECK_CONFIRM:
094C E560            514                     MOV A, 060h
094E B40A0B          515                     CJNE A, #0Ah, OPT3_INPUT_SKIP_CONFIRM
                     516                     
0951 E534            517                     MOV A, 034h
0953 F554            518                     MOV 054h, A
0955 756100          519                     MOV 061h, #00h
0958 757001          520                     MOV 070h, #OPT_ST
095B 22              521                     RET
                     522     
095C                 523     OPT3_INPUT_SKIP_CONFIRM:
095C 756100          524                     MOV 061h, #00h
095F 22              525                     RET
                     526     
0960                 527     OPT3_INIT:
0960 E570            528                     MOV A, 070h
0962 F571            529                     MOV 071h, A
                     530                     ; ÊòæÁ§∫ "C._d____"
                     531                     ; 35: C. (0x22 -> SEG_TABLE[0x16] if remapped? No, user defined code)
                     532                     ; SEG_TABLE Â¢ûÂä†ÂÆö‰πâ 0x46 (index 23) ‰∏∫ 'C.'
                     533                     ; 35: C.
                     534                     ; 34: _
0964 753517          535                     MOV 035h, #017h   ; 0x17 index is C. (Wait: index 17 in table is 0x0C 'P.'?
                             ? No)
                     536                     ; Let's check SEG_TABLE:
                     537                     ; 0..9 (0-9)
                     538                     ; A (10), b (11), C (12), d (13), E (14), F (15), _ (16), P. (17), r (18), 
                             L (19)
                     539                     ; 0. (20), 1. (21) ... 9. (29)
                     540                     ; n (30), o (31), o. (32), OFF (33), C. (34)
                     541                     
                     542                     ; OPT3 ÊèêÁ§∫ (TABLE_OPT3_PROMPT id=06)
0967 7406            543                     MOV A, #06h
0969 120000   F      544                     LCALL LED6_ApplyTable
096C 753B04          545                     MOV 03Bh, #04h    ; ÂÖâÊ†á‰ªé 34h ÂºÄÂßã
096F 22              546                     RET
                     547     
                     548     
0970                 549     PASS_HANDLER:
0970 E571            550                     MOV A, 071h
0972 B5704F          551                     CJNE A, 070h, PASS_INIT
0975 E561            552                     MOV A, 061h
0977 B40002          553                     CJNE A, #00h, PASS_HANDLE_KEY
097A 8058            554                     SJMP PASS_MODE
                     555     
097C                 556     PASS_HANDLE_KEY:
097C E560            557                     MOV A, 060h
097E 540F            558                     ANL A, #0Fh
0980 FF              559                     MOV R7, A
0981 C3              560                     CLR C
0982 940A            561                     SUBB A, #0Ah
0984 5015            562                     JNC PASS_SKIP_UPDATE
                     563     
                     564                     ; Êï∞Â≠óÈîÆ
0986 E539            565                     MOV A, 039h
0988 2430            566             ADD A, #030h
098A F8              567             MOV R0, A
098B EF              568                     MOV A, R7
098C F6              569             MOV @R0, A
                     570     
098D E539            571                     MOV A, 039h
098F B4FF02          572                     CJNE A, #0FFh, PASS_KEY_DEC
0992 8002            573                     SJMP PASS_KEY_DONE
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE    10

                     574     
0994                 575     PASS_KEY_DEC:
0994 1539            576             DEC 039H
                     577     
0996                 578     PASS_KEY_DONE:
0996 756100          579                     MOV 061h, #00h
0999 8039            580                     SJMP PASS_MODE
                     581     
099B                 582     PASS_SKIP_UPDATE:
099B E560            583                     MOV A, 060h
099D B40B34          584                     CJNE A, #0Bh, PASS_MODE
                     585                     ; BÈîÆÂõûÈÄÄ
09A0 0539            586                     INC 039h
09A2 E539            587                     MOV A, 039h
09A4 C3              588                     CLR C
09A5 9405            589                     SUBB A, #05h
09A7 500C            590                     JNC PASS_BACKSPACE_LIMIT ; ÊÅ¢Â§ç‰∏∫ 4
09A9 E539            591                     MOV A, 039h
09AB 2430            592                     ADD A, #030h
09AD F8              593                     MOV R0, A
09AE 7610            594                     MOV @R0, #010h
09B0 756100          595                     MOV 061h, #00h
09B3 801F            596                     SJMP PASS_MODE
                     597     
09B5                 598     PASS_BACKSPACE_LIMIT:
09B5 753904          599                     MOV 039h, #04h
09B8 E539            600                     MOV A, 039h
09BA 2430            601                     ADD A, #030h
09BC F8              602                     MOV R0, A
09BD 7610            603                     MOV @R0, #010h
09BF 756100          604                     MOV 061h, #00h
09C2 8010            605                     SJMP PASS_MODE
                     606     
09C4                 607     PASS_INIT:
09C4 E570            608                     MOV A, 070h
09C6 F571            609                     MOV 071h, A      
09C8 757002          610                     MOV 070h, #PASS_ST
                     611                     
                     612                     ; ÊòæÁ§∫ "P._____" (6‰Ωç)
                     613                     ; 35: P. (0x11)
                     614                     ; 34~30: _
                     615                     ; PASS Ê®°ÂºèÊòæÁ§∫ (TABLE_PASS_PROMPT id=07)
09CB 7407            616                     MOV A, #07h
09CD 120000   F      617                     LCALL LED6_ApplyTable
09D0 753904          618                     MOV 039h, #04h     ; ÂÖâÊ†á‰ΩçÁΩÆ 4 (Buffer 34h)
09D3 22              619                     RET
                     620     
09D4                 621     PASS_MODE:
09D4 E561            622                     MOV A, 061h
09D6 B40001          623                     CJNE A, #00h, PASS_MODE_CHECK_KEY
09D9 22              624                     RET
                     625     
09DA                 626     PASS_MODE_CHECK_KEY:
09DA E560            627                     MOV A, 060h
09DC B40A13          628                     CJNE A, #0Ah, PASS_MODE_SKIP_CONFIRM
                     629                     
09DF E539            630                     MOV A, 039h
09E1 B4FF07          631                     CJNE A, #0FFh, PASS_CONFIRM_INCOMPLETE
09E4 1209F6          632                     LCALL PASS_VERIFY_PASSWORD
09E7 756100          633                     MOV 061h, #00h
09EA 22              634                     RET
                     635     
09EB                 636     PASS_CONFIRM_INCOMPLETE:
09EB 120A23          637                     LCALL PASS_SHOW_ERROR
09EE 756100          638                     MOV 061h, #00h
09F1 22              639                     RET
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE    11

                     640     
09F2                 641     PASS_MODE_SKIP_CONFIRM:
09F2 756100          642                     MOV 061h, #00h
09F5 22              643                     RET
                     644     
09F6                 645     PASS_VERIFY_PASSWORD:
                     646                     ; È™åËØÅ 5 ‰ΩçÂØÜÁ†Å (Buffer 34..30) vs Table 0..4
09F6 7804            647                     MOV R0, #04h    ; Buffer Index
09F8 7B00            648                     MOV R3, #00h    ; Table Index
                     649     
09FA                 650     PASS_VERIFY_LOOP:
09FA E8              651                     MOV A, R0
09FB 2430            652                     ADD A, #030h
09FD F9              653                     MOV R1, A
09FE E7              654                     MOV A, @R1      
09FF FA              655                     MOV R2, A       
                     656                     
0A00 900029          657                     MOV DPTR, #PASSWORD_TABLE
0A03 EB              658                     MOV A, R3
0A04 93              659                     MOVC A, @A+DPTR 
                     660                     
0A05 B50202          661                     CJNE A, 02h, PASS_VERIFY_FAIL_CHECK
0A08 800B            662                     SJMP PASS_VERIFY_NEXT
                     663     
0A0A                 664     PASS_VERIFY_FAIL_CHECK:
0A0A EA              665                     MOV A, R2
0A0B F5F0            666                     MOV B, A
0A0D EB              667                     MOV A, R3
0A0E 900029          668                     MOV DPTR, #PASSWORD_TABLE
0A11 93              669                     MOVC A, @A+DPTR
0A12 B5F00A          670                     CJNE A, B, PASS_VERIFY_FAIL
                     671     
0A15                 672     PASS_VERIFY_NEXT:
0A15 18              673                     DEC R0
0A16 0B              674                     INC R3
0A17 EB              675                     MOV A, R3
0A18 B405DF          676                     CJNE A, #05h, PASS_VERIFY_LOOP ; 5‰Ωç
0A1B 120A4A          677                     LCALL PASS_SHOW_SUCCESS
0A1E 22              678                     RET
                     679     
0A1F                 680     PASS_VERIFY_FAIL:
0A1F 120A23          681                     LCALL PASS_SHOW_ERROR
0A22 22              682                     RET
                     683     
0A23                 684     PASS_SHOW_ERROR:
0A23 153A            685                     DEC 03Ah
0A25 E53A            686                     MOV A, 03Ah
0A27 601A            687                     JZ PASS_ERROR_LOCKED
                     688                     
                     689                     ; ÊòæÁ§∫ FALSEX (TABLE_PASS_ERROR_FALSEX id=08)ÔºåÊúÄÂêé‰∏Ä‰ΩçÁî±Ââ©‰ΩôÊ¨°Ê
                             ï∞Â°´ÂÖÖ
0A29 7408            690                     MOV A, #08h
0A2B 120000   F      691                     LCALL LED6_ApplyTable
0A2E E53A            692                     MOV A, 03Ah
0A30 F530            693                     MOV 030h, A
                     694                     
0A32 7B06            695                     MOV R3, #06h
0A34                 696     PASS_ERROR_DELAY_OUTER:
0A34 7CF0            697                     MOV R4, #0F0h
0A36                 698     PASS_ERROR_DELAY_LOOP:
0A36 7DFF            699                     MOV R5, #0FFh
0A38                 700     PASS_ERROR_DELAY_INNER:
0A38 00              701                     NOP
0A39 00              702                     NOP
0A3A 00              703                     NOP
0A3B DDFB            704                     DJNZ R5, PASS_ERROR_DELAY_INNER
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE    12

0A3D DCF7            705                     DJNZ R4, PASS_ERROR_DELAY_LOOP
0A3F DBF3            706                     DJNZ R3, PASS_ERROR_DELAY_OUTER
                     707                     
0A41 21C4            708                     AJMP PASS_INIT
                     709     
0A43                 710     PASS_ERROR_LOCKED:
                     711             ; ÈîÅÂÆöÊòæÁ§∫ÔºàTABLE_PASS_ERROR_LOCKED id=09Ôºâ
0A43 7409            712             MOV A, #09h
0A45 120000   F      713             LCALL LED6_ApplyTable
0A48 4143            714                     AJMP PASS_ERROR_LOCKED
                     715     
0A4A                 716     PASS_SHOW_SUCCESS:
0A4A 757001          717                     MOV 070h, #OPT_ST
0A4D 22              718                     RET
                     719     
                     720     END
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE    13

SYMBOL TABLE LISTING
------ ----- -------


N A M E                     T Y P E  V A L U E   ATTRIBUTES

B. . . . . . . . . . . . .  D ADDR   00F0H   A   
BITMASK_TABLE. . . . . . .  C ADDR   0023H   A   
CHECK_OPT. . . . . . . . .  C ADDR   0739H   A   
CHECK_OPT1 . . . . . . . .  C ADDR   0741H   A   
CHECK_OPT2 . . . . . . . .  C ADDR   0749H   A   
CHECK_OPT3 . . . . . . . .  C ADDR   0751H   A   
CHECK_PASS . . . . . . . .  C ADDR   0759H   A   
KEYINPUT_PROCESS . . . . .  C ADDR   -----       EXT
LED6_APPLYTABLE. . . . . .  C ADDR   -----       EXT
LOOP . . . . . . . . . . .  C ADDR   072CH   A   
MAIN . . . . . . . . . . .  C ADDR   0700H   A   
MATRIXKEY. . . . . . . . .  C ADDR   -----       EXT
MXK_STATE_CHECK. . . . . .  C ADDR   072FH   A   
OPT1_HANDLER . . . . . . .  C ADDR   080CH   A   
OPT1_INIT. . . . . . . . .  C ADDR   0876H   A   
OPT1_INPUT_BACKSPACE_LIMIT  C ADDR   0850H   A   
OPT1_INPUT_CHECK_CONFIRM .  C ADDR   085EH   A   
OPT1_INPUT_DEC . . . . . .  C ADDR   0831H   A   
OPT1_INPUT_DONE. . . . . .  C ADDR   0833H   A   
OPT1_INPUT_HANDLE_KEY. . .  C ADDR   0819H   A   
OPT1_INPUT_MODE. . . . . .  C ADDR   0818H   A   
OPT1_INPUT_SKIP_CONFIRM. .  C ADDR   0872H   A   
OPT1_INPUT_SPECIAL_KEY . .  C ADDR   0837H   A   
OPT1_ST. . . . . . . . . .  N NUMB   0011H   A   
OPT2_HANDLER . . . . . . .  C ADDR   0883H   A   
OPT2_INIT. . . . . . . . .  C ADDR   08EDH   A   
OPT2_INPUT_BACKSPACE_LIMIT  C ADDR   08C7H   A   
OPT2_INPUT_CHECK_CONFIRM .  C ADDR   08D5H   A   
OPT2_INPUT_DEC . . . . . .  C ADDR   08A8H   A   
OPT2_INPUT_DONE. . . . . .  C ADDR   08AAH   A   
OPT2_INPUT_HANDLE_KEY. . .  C ADDR   0890H   A   
OPT2_INPUT_MODE. . . . . .  C ADDR   088FH   A   
OPT2_INPUT_SKIP_CONFIRM. .  C ADDR   08E9H   A   
OPT2_INPUT_SPECIAL_KEY . .  C ADDR   08AEH   A   
OPT2_ST. . . . . . . . . .  N NUMB   0012H   A   
OPT3_HANDLER . . . . . . .  C ADDR   08FAH   A   
OPT3_INIT. . . . . . . . .  C ADDR   0960H   A   
OPT3_INPUT_BACKSPACE_LIMIT  C ADDR   093EH   A   
OPT3_INPUT_CHECK_CONFIRM .  C ADDR   094CH   A   
OPT3_INPUT_DEC . . . . . .  C ADDR   091FH   A   
OPT3_INPUT_DONE. . . . . .  C ADDR   0921H   A   
OPT3_INPUT_HANDLE_KEY. . .  C ADDR   0907H   A   
OPT3_INPUT_MODE. . . . . .  C ADDR   0906H   A   
OPT3_INPUT_SKIP_CONFIRM. .  C ADDR   095CH   A   
OPT3_INPUT_SPECIAL_KEY . .  C ADDR   0925H   A   
OPT3_ST. . . . . . . . . .  N NUMB   0013H   A   
OPT_CHECK_ALL_INPUTS . . .  C ADDR   07E1H   A   
OPT_CHECK_KEY1 . . . . . .  C ADDR   07B3H   A   
OPT_CHECK_KEY2 . . . . . .  C ADDR   07C1H   A   
OPT_CHECK_KEY3 . . . . . .  C ADDR   07CFH   A   
OPT_ERROR_DELAY_INNER. . .  C ADDR   07FFH   A   
OPT_ERROR_DELAY_LOOP . . .  C ADDR   07FDH   A   
OPT_ERROR_DELAY_OUTER. . .  C ADDR   07FBH   A   
OPT_HANDLER. . . . . . . .  C ADDR   0790H   A   
OPT_HANDLE_KEY . . . . . .  C ADDR   07A8H   A   
OPT_HANDLE_KEY_SKIP. . . .  C ADDR   07DDH   A   
OPT_INIT . . . . . . . . .  C ADDR   079CH   A   
OPT_INPUT_INCOMPLETE . . .  C ADDR   07F4H   A   
OPT_MODE . . . . . . . . .  C ADDR   07A2H   A   
OPT_ST . . . . . . . . . .  N NUMB   0001H   A   
A51 MACRO ASSEMBLER  MAIN                                                                 12/18/2025 23:56:58 PAGE    14

P0 . . . . . . . . . . . .  D ADDR   0080H   A   
P2 . . . . . . . . . . . .  D ADDR   00A0H   A   
PASSWORD_TABLE . . . . . .  C ADDR   0029H   A   
PASS_BACKSPACE_LIMIT . . .  C ADDR   09B5H   A   
PASS_CONFIRM_INCOMPLETE. .  C ADDR   09EBH   A   
PASS_ERROR_DELAY_INNER . .  C ADDR   0A38H   A   
PASS_ERROR_DELAY_LOOP. . .  C ADDR   0A36H   A   
PASS_ERROR_DELAY_OUTER . .  C ADDR   0A34H   A   
PASS_ERROR_LOCKED. . . . .  C ADDR   0A43H   A   
PASS_HANDLER . . . . . . .  C ADDR   0970H   A   
PASS_HANDLE_KEY. . . . . .  C ADDR   097CH   A   
PASS_INIT. . . . . . . . .  C ADDR   09C4H   A   
PASS_KEY_DEC . . . . . . .  C ADDR   0994H   A   
PASS_KEY_DONE. . . . . . .  C ADDR   0996H   A   
PASS_MODE. . . . . . . . .  C ADDR   09D4H   A   
PASS_MODE_CHECK_KEY. . . .  C ADDR   09DAH   A   
PASS_MODE_SKIP_CONFIRM . .  C ADDR   09F2H   A   
PASS_SHOW_ERROR. . . . . .  C ADDR   0A23H   A   
PASS_SHOW_SUCCESS. . . . .  C ADDR   0A4AH   A   
PASS_SKIP_UPDATE . . . . .  C ADDR   099BH   A   
PASS_ST. . . . . . . . . .  N NUMB   0002H   A   
PASS_VERIFY_FAIL . . . . .  C ADDR   0A1FH   A   
PASS_VERIFY_FAIL_CHECK . .  C ADDR   0A0AH   A   
PASS_VERIFY_LOOP . . . . .  C ADDR   09FAH   A   
PASS_VERIFY_NEXT . . . . .  C ADDR   0A15H   A   
PASS_VERIFY_PASSWORD . . .  C ADDR   09F6H   A   
RUN_HANDLER. . . . . . . .  C ADDR   0763H   A   
RUN_HANDLE_KEY . . . . . .  C ADDR   076FH   A   
RUN_HANDLE_OTHER . . . . .  C ADDR   077CH   A   
RUN_INIT . . . . . . . . .  C ADDR   0781H   A   
RUN_MODE . . . . . . . . .  C ADDR   0787H   A   
RUN_ST . . . . . . . . . .  N NUMB   0000H   A   
SEG_TABLE. . . . . . . . .  C ADDR   0000H   A   
SKIP_PASS. . . . . . . . .  C ADDR   0761H   A   
TIMER0_INIT. . . . . . . .  C ADDR   -----       EXT
TIMER0_ISR . . . . . . . .  C ADDR   -----       EXT
TIMER1_INIT. . . . . . . .  C ADDR   -----       EXT
TIMER1_ISR . . . . . . . .  C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
