A51 MACRO ASSEMBLER  KEYBOARD                                                             12/18/2025 18:15:41 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\..\..\..\Git\C8051F020StWork\driver\keyboard.obj
ASSEMBLER INVOKED BY: D:\1\Keil\C51\BIN\A51.EXE D:\Git\C8051F020StWork\driver\keyboard.asm SET(SMALL) DEBUG PRINT(.\List
                      ings\..\..\..\Git\C8051F020StWork\driver\keyboard.lst) OBJECT(.\Objects\..\..\..\Git\C8051F020StWo
                      rk\driver\keyboard.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     PUBLIC  MatrixKey
                       2     
                       3     MK      SEGMENT CODE
----                   4     rseg    MK
                       5     
0000                   6     MatrixKey:
0000 74FF              7                     MOV A,#0FFh    ; 默认返回 0xFF 表示无键按下
0002 7590FF            8                     MOV P1,#0FFh
                       9     
0005 C293             10                     CLR P1.3
0007 209702           11                     JB P1.7,MK_SK1
000A 0100     F       12                     AJMP MXK_1_CHECK
000C                  13     MK_SK1:
000C 209602           14                     JB P1.6,MK_SK2
000F 0100     F       15                     AJMP MXK_5_CHECK
0011                  16     MK_SK2:
0011 209502           17                     JB P1.5,MK_SK3
0014 0100     F       18                     AJMP MXK_9_CHECK
0016                  19     MK_SK3:
0016 209402           20                     JB P1.4,MK_SK4
0019 0100     F       21                     AJMP MXK_13_CHECK
001B                  22     MK_SK4:
001B 7590FF           23                     MOV P1,#0FFh
                      24     
001E C292             25                     CLR P1.2
0020 209702           26                     JB P1.7,MK_SK5
0023 0100     F       27                     AJMP MXK_2_CHECK
0025                  28     MK_SK5:
0025 209602           29                     JB P1.6,MK_SK6
0028 0100     F       30                     AJMP MXK_6_CHECK
002A                  31     MK_SK6:
002A 209502           32                     JB P1.5,MK_SK7
002D 0100     F       33                     AJMP MXK_10_CHECK
002F                  34     MK_SK7:
002F 209402           35                     JB P1.4,MK_SK8
0032 0100     F       36                     AJMP MXK_14_CHECK
0034                  37     MK_SK8:
0034 7590FF           38                     MOV P1,#0FFh
                      39     
0037 C291             40                     CLR P1.1
0039 209702           41                     JB P1.7,MK_SK9
003C 0100     F       42                     AJMP MXK_3_CHECK
003E                  43     MK_SK9:
003E 209602           44                     JB P1.6,MK_SK10
0041 0100     F       45                     AJMP MXK_7_CHECK
0043                  46     MK_SK10:
0043 209502           47                     JB P1.5,MK_SK11
0046 0100     F       48                     AJMP MXK_11_CHECK
0048                  49     MK_SK11:
0048 209402           50                     JB P1.4,MK_SK12
004B 0100     F       51                     AJMP MXK_15_CHECK
004D                  52     MK_SK12:
004D 7590FF           53                     MOV P1,#0FFh
                      54     
0050 C290             55                     CLR P1.0
0052 209702           56                     JB P1.7,MK_SK13
A51 MACRO ASSEMBLER  KEYBOARD                                                             12/18/2025 18:15:41 PAGE     2

0055 0100     F       57                     AJMP MXK_4_CHECK
0057                  58     MK_SK13:
0057 209602           59                     JB P1.6,MK_SK14
005A 0100     F       60                     AJMP MXK_8_CHECK
005C                  61     MK_SK14:
005C 209502           62                     JB P1.5,MK_SK15
005F 0100     F       63                     AJMP MXK_12_CHECK
0061                  64     MK_SK15:
0061 209402           65                     JB P1.4,MK_SK16
0064 0100     F       66                     AJMP MXK_16_CHECK
0066                  67     MK_SK16:
0066 7590FF           68                     MOV P1,#0FFh
0069 22               69                     RET
                      70     
006A                  71     MXK_1_CHECK:
006A 740F             72                     MOV A,#0Fh
006C 754001           73                     MOV 040h,#01
006F 754101           74                     MOV 041h,#01
0072 22               75                     RET
0073                  76     MXK_5_CHECK:
0073 740E             77                     MOV A,#0Eh
0075 754001           78                     MOV 040h,#01
0078 754102           79                     MOV 041h,#02
007B 22               80                     RET
007C                  81     MXK_9_CHECK:
007C 740D             82                     MOV A,#0Dh
007E 754001           83                     MOV 040h,#01
0081 754103           84                     MOV 041h,#03
0084 22               85                     RET
0085                  86     MXK_13_CHECK:
0085 740C             87                     MOV A,#0Ch
0087 754001           88                     MOV 040h,#01
008A 754104           89                     MOV 041h,#04
008D 22               90                     RET
008E                  91     MXK_2_CHECK:
008E 740B             92                     MOV A,#0Bh
0090 754002           93                     MOV 040h,#02
0093 754101           94                     MOV 041h,#01
0096 22               95                     RET
0097                  96     MXK_6_CHECK:
0097 740A             97                     MOV A,#0Ah
0099 754002           98                     MOV 040h,#02
009C 754102           99                     MOV 041h,#02
009F 22              100                     RET
00A0                 101     MXK_10_CHECK:
00A0 7409            102                     MOV A,#09
00A2 754002          103                     MOV 040h,#02
00A5 754103          104                     MOV 041h,#03
00A8 22              105                     RET
00A9                 106     MXK_14_CHECK:
00A9 7408            107                     MOV A,#08
00AB 754002          108                     MOV 040h,#02
00AE 754104          109                     MOV 041h,#04
00B1 22              110                     RET
00B2                 111     MXK_3_CHECK:
00B2 7407            112                     MOV A,#07
00B4 754003          113                     MOV 040h,#03
00B7 754101          114                     MOV 041h,#01
00BA 22              115                     RET
00BB                 116     MXK_7_CHECK:
00BB 7406            117                     MOV A,#06
00BD 754003          118                     MOV 040h,#03
00C0 754102          119                     MOV 041h,#02
00C3 22              120                     RET
00C4                 121     MXK_11_CHECK:
00C4 7405            122                     MOV A,#05
A51 MACRO ASSEMBLER  KEYBOARD                                                             12/18/2025 18:15:41 PAGE     3

00C6 754003          123                     MOV 040h,#03
00C9 754103          124                     MOV 041h,#03
00CC 22              125                     RET
00CD                 126     MXK_15_CHECK:
00CD 7404            127                     MOV A,#04
00CF 754003          128                     MOV 040h,#03
00D2 754104          129                     MOV 041h,#04
00D5 22              130                     RET
00D6                 131     MXK_4_CHECK:
00D6 7403            132                     MOV A,#03
00D8 754004          133                     MOV 040h,#04
00DB 754101          134                     MOV 041h,#01
00DE 22              135                     RET
00DF                 136     MXK_8_CHECK:
00DF 7402            137                     MOV A,#02
00E1 754004          138                     MOV 040h,#04
00E4 754102          139                     MOV 041h,#02
00E7 22              140                     RET
00E8                 141     MXK_12_CHECK:
00E8 7401            142                     MOV A,#01
00EA 754004          143                     MOV 040h,#04
00ED 754103          144                     MOV 041h,#03
00F0 22              145                     RET
00F1                 146     MXK_16_CHECK:
00F1 7400            147                     MOV A,#00
00F3 754004          148                     MOV 040h,#04
00F6 754104          149                     MOV 041h,#04
00F9 22              150                     RET
                     151     
                     152     END
A51 MACRO ASSEMBLER  KEYBOARD                                                             12/18/2025 18:15:41 PAGE     4

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

MATRIXKEY. . . . .  C ADDR   0000H   R   SEG=MK
MK . . . . . . . .  C SEG    00FAH       REL=UNIT
MK_SK1 . . . . . .  C ADDR   000CH   R   SEG=MK
MK_SK10. . . . . .  C ADDR   0043H   R   SEG=MK
MK_SK11. . . . . .  C ADDR   0048H   R   SEG=MK
MK_SK12. . . . . .  C ADDR   004DH   R   SEG=MK
MK_SK13. . . . . .  C ADDR   0057H   R   SEG=MK
MK_SK14. . . . . .  C ADDR   005CH   R   SEG=MK
MK_SK15. . . . . .  C ADDR   0061H   R   SEG=MK
MK_SK16. . . . . .  C ADDR   0066H   R   SEG=MK
MK_SK2 . . . . . .  C ADDR   0011H   R   SEG=MK
MK_SK3 . . . . . .  C ADDR   0016H   R   SEG=MK
MK_SK4 . . . . . .  C ADDR   001BH   R   SEG=MK
MK_SK5 . . . . . .  C ADDR   0025H   R   SEG=MK
MK_SK6 . . . . . .  C ADDR   002AH   R   SEG=MK
MK_SK7 . . . . . .  C ADDR   002FH   R   SEG=MK
MK_SK8 . . . . . .  C ADDR   0034H   R   SEG=MK
MK_SK9 . . . . . .  C ADDR   003EH   R   SEG=MK
MXK_10_CHECK . . .  C ADDR   00A0H   R   SEG=MK
MXK_11_CHECK . . .  C ADDR   00C4H   R   SEG=MK
MXK_12_CHECK . . .  C ADDR   00E8H   R   SEG=MK
MXK_13_CHECK . . .  C ADDR   0085H   R   SEG=MK
MXK_14_CHECK . . .  C ADDR   00A9H   R   SEG=MK
MXK_15_CHECK . . .  C ADDR   00CDH   R   SEG=MK
MXK_16_CHECK . . .  C ADDR   00F1H   R   SEG=MK
MXK_1_CHECK. . . .  C ADDR   006AH   R   SEG=MK
MXK_2_CHECK. . . .  C ADDR   008EH   R   SEG=MK
MXK_3_CHECK. . . .  C ADDR   00B2H   R   SEG=MK
MXK_4_CHECK. . . .  C ADDR   00D6H   R   SEG=MK
MXK_5_CHECK. . . .  C ADDR   0073H   R   SEG=MK
MXK_6_CHECK. . . .  C ADDR   0097H   R   SEG=MK
MXK_7_CHECK. . . .  C ADDR   00BBH   R   SEG=MK
MXK_8_CHECK. . . .  C ADDR   00DFH   R   SEG=MK
MXK_9_CHECK. . . .  C ADDR   007CH   R   SEG=MK
P1 . . . . . . . .  D ADDR   0090H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
