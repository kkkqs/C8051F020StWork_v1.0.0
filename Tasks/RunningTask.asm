$INCLUDE (config.inc)

RUN SEGMENT CODE
rseg RUN

PUBLIC RUN_HANDLER
EXTRN CODE(LED6_Clear)

RUN_HANDLER:
	MOV A, 071h
	CJNE A, 070h, RUN_INIT

	MOV A, 061h
	CJNE A, #00h, RUN_HANDLE_KEY
	SJMP RUN_MODE

RUN_HANDLE_KEY:
	MOV A, 060h
	CJNE A, #08Ah, RUN_HANDLE_OTHER
	MOV 070h, #PASS_ST
	MOV 061h, #00h
	SJMP RUN_MODE

RUN_HANDLE_OTHER:
	MOV 061h, #00h
	SJMP RUN_MODE

RUN_INIT:
	MOV A, 070h
	MOV 071h, A
	SJMP RUN_MODE

RUN_MODE:
	LCALL LED6_Clear
	MOV 039h, #04h ; 密码光标初始化位置 (for later use)
	RET

END
